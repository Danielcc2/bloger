(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2287:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9324,23)),Promise.resolve().then(r.bind(r,7288)),Promise.resolve().then(r.bind(r,5731)),Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.t.bind(r,5299,23))},5299:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},5731:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,default:()=>a});var s=r(5155),n=r(2115),o=r(5695);let l=(0,n.createContext)(void 0),i=()=>{let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e};function a(e){let{children:t}=e,[r,i]=(0,n.useState)(null),[a,c]=(0,n.useState)(null),[h,u]=(0,n.useState)(!0),[d,f]=(0,n.useState)(null),m=(0,o.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(e){c(e);let t=await fetch("http://localhost:8000/api/users/profile/",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();i(e)}else localStorage.removeItem("token"),c(null),i(null)}}catch(e){console.error("Error verificando sesi\xf3n:",e)}finally{u(!1)}})()},[]);let x=async(e,t)=>{u(!0),f(null);try{let r=await fetch("http://localhost:8000/api/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(r.ok){let e=await r.json();localStorage.setItem("token",e.access),localStorage.setItem("refresh_token",e.refresh),c(e.access);let t=await fetch("http://localhost:8000/api/users/profile/",{headers:{Authorization:"Bearer ".concat(e.access)}});if(t.ok){let e=await t.json();return i(e),!0}}else{let e=await r.json();return f(e.detail||"Error al iniciar sesi\xf3n"),!1}}catch(e){f("Error de conexi\xf3n"),console.error(e)}finally{u(!1)}return!1},j=async(e,t,r,s)=>{u(!0),f(null);try{let l={email:e,password:t,...r&&{first_name:r},...s&&{last_name:s}},i=await fetch("http://localhost:8000/api/users/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(i.ok)return await x(e,t);{var n,o;let e=await i.json();return f((null==(n=e.email)?void 0:n[0])||(null==(o=e.password)?void 0:o[0])||"Error al registrarse"),!1}}catch(e){return f("Error de conexi\xf3n"),console.error(e),!1}finally{u(!1)}};return(0,s.jsx)(l.Provider,{value:{user:r,token:a,login:x,register:j,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),c(null),i(null),m.push("/")},isAuthenticated:!!r&&!!a,isLoading:h,error:d},children:t})}},7288:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(5155),n=r(6874),o=r.n(n),l=r(5695),i=r(2115),a=r(5731);let c=e=>{let{href:t,current:r,children:n}=e,l=r===t||"/"!==t&&r.startsWith(t);return(0,s.jsx)(o(),{href:t,className:"".concat(l?"text-yellow-300 font-medium":"text-white"," hover:text-teal-200 transition-colors"),children:n})},h=e=>{let{href:t,onClick:r,children:n}=e;return(0,s.jsx)(o(),{href:t,onClick:r,className:"block py-2 text-white hover:text-teal-200 transition-colors",children:n})},u=()=>{let[e,t]=(0,i.useState)(!1),r=(0,l.usePathname)(),{user:n,logout:u}=(0,a.A)(),d=()=>{t(!e)};return(0,s.jsx)("header",{className:"bg-teal-700 text-white shadow-md",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(o(),{href:"/",className:"text-2xl font-bold",children:"BlogViaje"}),(0,s.jsx)("button",{className:"md:hidden p-2 focus:outline-none",onClick:d,"aria-label":"Toggle menu",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,s.jsxs)("nav",{className:"hidden md:flex items-center space-x-6",children:[(0,s.jsx)(c,{href:"/",current:r,children:"Inicio"}),(0,s.jsx)(c,{href:"/articulos",current:r,children:"Art\xedculos"}),(0,s.jsx)(c,{href:"/destinos",current:r,children:"Destinos"}),n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{href:"/perfil",current:r,children:"Mi Perfil"}),(0,s.jsx)("button",{onClick:u,className:"text-white hover:text-teal-200 transition-colors",children:"Cerrar Sesi\xf3n"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{href:"/login",current:r,children:"Iniciar Sesi\xf3n"}),(0,s.jsx)(c,{href:"/registro",current:r,children:"Registrarse"})]})]})]}),e&&(0,s.jsxs)("nav",{className:"md:hidden mt-4 space-y-3 pb-3",children:[(0,s.jsx)(h,{href:"/",onClick:d,children:"Inicio"}),(0,s.jsx)(h,{href:"/articulos",onClick:d,children:"Art\xedculos"}),(0,s.jsx)(h,{href:"/destinos",onClick:d,children:"Destinos"}),n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{href:"/perfil",onClick:d,children:"Mi Perfil"}),(0,s.jsx)("button",{onClick:()=>{u(),d()},className:"block w-full text-left py-2 text-white hover:text-teal-200 transition-colors",children:"Cerrar Sesi\xf3n"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{href:"/login",onClick:d,children:"Iniciar Sesi\xf3n"}),(0,s.jsx)(h,{href:"/registro",onClick:d,children:"Registrarse"})]})]})]})})}},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[618,874,441,684,358],()=>t(2287)),_N_E=e.O()}]);