(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{3498:(e,t,r)=>{Promise.resolve().then(r.bind(r,8887))},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},5731:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,default:()=>i});var a=r(5155),s=r(2115),o=r(5695);let l=(0,s.createContext)(void 0),n=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e};function i(e){let{children:t}=e,[r,n]=(0,s.useState)(null),[i,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0),[m,h]=(0,s.useState)(null),p=(0,o.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(e){c(e);let t=await fetch("http://localhost:8000/api/users/profile/",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e)}else localStorage.removeItem("token"),c(null),n(null)}}catch(e){console.error("Error verificando sesi\xf3n:",e)}finally{u(!1)}})()},[]);let f=async(e,t)=>{u(!0),h(null);try{let r=await fetch("http://localhost:8000/api/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(r.ok){let e=await r.json();localStorage.setItem("token",e.access),localStorage.setItem("refresh_token",e.refresh),c(e.access);let t=await fetch("http://localhost:8000/api/users/profile/",{headers:{Authorization:"Bearer ".concat(e.access)}});if(t.ok){let e=await t.json();return n(e),!0}}else{let e=await r.json();return h(e.detail||"Error al iniciar sesi\xf3n"),!1}}catch(e){h("Error de conexi\xf3n"),console.error(e)}finally{u(!1)}return!1},x=async(e,t,r,a)=>{u(!0),h(null);try{let l={email:e,password:t,...r&&{first_name:r},...a&&{last_name:a}},n=await fetch("http://localhost:8000/api/users/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(n.ok)return await f(e,t);{var s,o;let e=await n.json();return h((null==(s=e.email)?void 0:s[0])||(null==(o=e.password)?void 0:o[0])||"Error al registrarse"),!1}}catch(e){return h("Error de conexi\xf3n"),console.error(e),!1}finally{u(!1)}};return(0,a.jsx)(l.Provider,{value:{user:r,token:i,login:f,register:x,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),c(null),n(null),p.push("/")},isAuthenticated:!!r&&!!i,isLoading:d,error:m},children:t})}},8887:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),s=r(2115),o=r(5695),l=r(6874),n=r.n(l),i=r(5731);function c(){let[e,t]=(0,s.useState)(""),[r,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),f=(0,o.useRouter)(),{register:x,error:v}=(0,i.A)(),g=async t=>{if(t.preventDefault(),!e||!r||!c)return void m("Por favor, completa todos los campos.");if(r!==c)return void m("Las contrase\xf1as no coinciden.");if(r.length<8)return void m("La contrase\xf1a debe tener al menos 8 caracteres.");p(!0),m("");try{await x(e,r)?f.push("/"):m(v||"Error al registrarse. Por favor, int\xe9ntalo de nuevo.")}catch(e){m("Error al registrarse. Por favor, int\xe9ntalo de nuevo m\xe1s tarde."),console.error(e)}finally{p(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crea tu cuenta"}),(0,a.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["O"," ",(0,a.jsx)(n(),{href:"/login",className:"font-medium text-teal-600 hover:text-teal-500",children:"inicia sesi\xf3n si ya tienes una"})]})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:g,children:[(0,a.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 focus:z-10 sm:text-sm",placeholder:"Email"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Contrase\xf1a"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:r,onChange:e=>l(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 focus:z-10 sm:text-sm",placeholder:"Contrase\xf1a"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirmar contrase\xf1a"}),(0,a.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,value:c,onChange:e=>d(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 focus:z-10 sm:text-sm",placeholder:"Confirmar contrase\xf1a"})]})]}),u&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:u})}),(0,a.jsx)("div",{children:(0,a.jsxs)("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 ".concat(h?"opacity-70 cursor-not-allowed":""),children:[h?(0,a.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(0,a.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-teal-500 group-hover:text-teal-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})})}),h?"Registrando...":"Registrarse"]})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Al registrarte, aceptas nuestros"," ",(0,a.jsx)(n(),{href:"/terminos",className:"font-medium text-teal-600 hover:text-teal-500",children:"T\xe9rminos de Servicio"})," ","y"," ",(0,a.jsx)(n(),{href:"/privacidad",className:"font-medium text-teal-600 hover:text-teal-500",children:"Pol\xedtica de Privacidad"})]})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(3498)),_N_E=e.O()}]);