(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{943:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(5155),s=a(2115),o=a(6874),r=a.n(o),l=a(6766);let i="http://localhost:8000";function c(){let[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)(!0),[r,l]=(0,s.useState)(null),c=async()=>{try{o(!0),l(null),console.log("Obteniendo destinos desde:","".concat(i,"/api/destinations/"));let e=new Date().getTime(),a=await fetch("".concat(i,"/api/destinations/?t=").concat(e),{method:"GET",headers:{Accept:"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},cache:"no-store"});if(console.log("Respuesta de destinos:",a.status,a.statusText),!a.ok){let e=await a.text();throw console.error("Detalles del error:",e),Error("Error al cargar destinos: ".concat(a.status))}let n=await a.json();console.log("Datos de destinos:",n);let s=[];if(n&&"object"==typeof n&&"results"in n&&Array.isArray(n.results)){if(s=n.results,n.next)try{let t=await fetch("".concat(n.next,"&t=").concat(e),{method:"GET",headers:{Accept:"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},cache:"no-store"});if(t.ok){let e=await t.json();e&&e.results&&(s=[...s,...e.results],console.log("Cargada segunda p\xe1gina de destinos, total:",s.length))}}catch(e){console.error("Error cargando la siguiente p\xe1gina:",e)}}else Array.isArray(n)&&(s=n);let r={};s.forEach(e=>{let t=e.continent?e.continent.name:"Sin continente";r[t]=(r[t]||0)+1}),console.log("Destinos por continente:",r),t(s)}catch(e){console.error("Error obteniendo destinos:",e),l("Error al cargar los destinos: ".concat(e instanceof Error?e.message:"Error desconocido"))}finally{o(!1)}};(0,s.useEffect)(()=>{c()},[]);let m={Europa:["Espa\xf1a","Francia","Italia","Alemania","Portugal","Reino Unido","Grecia","Suiza","Pa\xedses Bajos","Austria"],Asia:["Jap\xf3n","China","Tailandia","India","Vietnam","Indonesia","Malasia","Singapur","Corea del Sur","Filipinas"],América:["Estados Unidos","M\xe9xico","Canad\xe1","Brasil","Argentina","Colombia","Per\xfa","Chile","Cuba","Costa Rica"],África:["Marruecos","Egipto","Sud\xe1frica","Kenia","Tanzania","T\xfanez","Etiop\xeda","Ghana","Senegal","Namibia"],Oceanía:["Australia","Nueva Zelanda","Fiji","Polinesia Francesa","Samoa","Vanuatu","Islas Cook","Pap\xfaa Nueva Guinea"],Antártida:["Base Esperanza","Estaci\xf3n McMurdo","Base Marambio","Villa Las Estrellas","Base Orcadas"]},u=e=>{for(let[t,a]of Object.entries(m))if(a.includes(e))return t;return"Otros"},[x,g]=(0,s.useState)("Todos"),[h,p]=(0,s.useState)("");(0,s.useEffect)(()=>{console.log("Continente seleccionado: ".concat(x));let t=e.filter(e=>"Todos"===x||"Otros"===x&&(!e.continent||"Otros"===e.continent.name)||e.continent&&e.continent.name===x);console.log("Destinos que coinciden con el filtro ".concat(x,": ").concat(t.length)),t.forEach(e=>{console.log("- ".concat(e.name," (").concat(e.continent?e.continent.name:"Sin continente",")"))})},[x,e]);let b=["Todos",...Object.keys(m),"Otros"],f=e.filter(e=>{let t="Todos"===x||"Otros"===x&&(!e.continent||"Otros"===e.continent.name)||e.continent&&e.continent.name===x;if("Am\xe9rica"===x&&e.continent&&"america"===e.continent.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase())return!0;let a=""===h||e.name.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase())||e.city.toLowerCase().includes(h.toLowerCase());return t&&a});return(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold mb-4 text-gray-800",children:"Explora Destinos Incre\xedbles"}),(0,n.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-4",children:"Descubre lugares maravillosos alrededor del mundo y planifica tu pr\xf3xima aventura."})]}),r&&(0,n.jsxs)("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg mb-6 max-w-3xl mx-auto",children:[r,(0,n.jsx)("button",{onClick:()=>l(null),className:"ml-2 text-red-800 hover:underline",children:"Cerrar"})]}),e.length>0&&(0,n.jsxs)("div",{className:"mb-12 flex flex-col gap-6",children:[(0,n.jsx)("div",{className:"w-full max-w-lg mx-auto",children:(0,n.jsx)("input",{type:"text",placeholder:"Buscar destinos, ciudades...",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2 text-center",children:"Continentes"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:b.map(e=>(0,n.jsx)("button",{onClick:()=>{g(e),console.log("Seleccionado continente: ".concat(e)),"Am\xe9rica"===e&&c()},className:"px-4 py-2 rounded-lg transition-colors ".concat(x===e?"bg-teal-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]})]}),!a&&!r&&(0,n.jsx)(n.Fragment,{children:f.length>0?(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:f.map(e=>(0,n.jsx)(d,{destination:e,continentName:e.continent?e.continent.name:u(e.country)},e.id))}):e.length>0?(0,n.jsxs)("div",{className:"text-center py-16 bg-gray-50 rounded-lg",children:[(0,n.jsx)("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"No se encontraron destinos para los filtros seleccionados"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Prueba a cambiar los filtros de b\xfasqueda"}),(0,n.jsx)("button",{onClick:()=>{g("Todos"),p("")},className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:"Ver todos los destinos"})]}):(0,n.jsxs)("div",{className:"text-center py-16 bg-yellow-50 rounded-lg",children:[(0,n.jsx)("h3",{className:"text-xl font-medium text-yellow-700 mb-2",children:"No hay destinos disponibles"}),(0,n.jsx)("p",{className:"text-yellow-600 mb-4",children:"Se conect\xf3 al backend pero no se encontraron destinos para mostrar"}),(0,n.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Recargar p\xe1gina"})]})})]})}let d=e=>{let{destination:t,continentName:a}=e;return(0,n.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[(0,n.jsxs)("div",{className:"relative h-48",children:[(0,n.jsx)(l.default,{src:t.image?t.image.startsWith("http")?t.image:t.image.startsWith("/media/")?"".concat(i).concat(t.image):"".concat(i,"/media/").concat(t.image):"/images/destinos/default.jpg",alt:t.name,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover",onError:e=>{let t=e.target;t.onerror=null,t.src="/images/destinos/default.jpg"}}),(0,n.jsx)("div",{className:"absolute top-2 right-2 bg-teal-500 text-white text-xs px-2 py-1 rounded-full",children:a})]}),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold mb-2",children:t.name}),(0,n.jsxs)("p",{className:"text-gray-600 text-sm mb-3",children:[t.city,", ",t.country]}),(0,n.jsxs)("p",{className:"text-gray-700 mb-4",children:[(e=>{let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""})(t.description).substring(0,100),"..."]}),(0,n.jsx)(r(),{href:"/destinos/".concat(t.slug),className:"inline-block px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors text-sm",children:"Explorar destino"})]})]})}},9378:(e,t,a)=>{Promise.resolve().then(a.bind(a,943))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,766,441,684,358],()=>t(9378)),_N_E=e.O()}]);