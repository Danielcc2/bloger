(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7],{5731:(e,t,l)=>{"use strict";l.d(t,{A:()=>i,default:()=>o});var a=l(5155),n=l(2115),r=l(5695);let s=(0,n.createContext)(void 0),i=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e};function o(e){let{children:t}=e,[l,i]=(0,n.useState)(null),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!0),[h,p]=(0,n.useState)(null),m=(0,r.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(e){c(e);let t=await fetch("http://localhost:8000/api/users/profile/",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();i(e)}else localStorage.removeItem("token"),c(null),i(null)}}catch(e){console.error("Error verificando sesi\xf3n:",e)}finally{u(!1)}})()},[]);let g=async(e,t)=>{u(!0),p(null);try{let l=await fetch("http://localhost:8000/api/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(l.ok){let e=await l.json();localStorage.setItem("token",e.access),localStorage.setItem("refresh_token",e.refresh),c(e.access);let t=await fetch("http://localhost:8000/api/users/profile/",{headers:{Authorization:"Bearer ".concat(e.access)}});if(t.ok){let e=await t.json();return i(e),!0}}else{let e=await l.json();return p(e.detail||"Error al iniciar sesi\xf3n"),!1}}catch(e){p("Error de conexi\xf3n"),console.error(e)}finally{u(!1)}return!1},x=async(e,t,l,a)=>{u(!0),p(null);try{let s={email:e,password:t,...l&&{first_name:l},...a&&{last_name:a}},i=await fetch("http://localhost:8000/api/users/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(i.ok)return await g(e,t);{var n,r;let e=await i.json();return p((null==(n=e.email)?void 0:n[0])||(null==(r=e.password)?void 0:r[0])||"Error al registrarse"),!1}}catch(e){return p("Error de conexi\xf3n"),console.error(e),!1}finally{u(!1)}};return(0,a.jsx)(s.Provider,{value:{user:l,token:o,login:g,register:x,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),c(null),i(null),m.push("/")},isAuthenticated:!!l&&!!o,isLoading:d,error:h},children:t})}},5775:(e,t,l)=>{Promise.resolve().then(l.bind(l,8456))},8456:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>I});var a=l(5155),n=l(2115),r=l(5695),s=l(6874),i=l.n(s),o=l(5731),c=l(5109),d=l(5559),u=l(7360),h=l(6761),p=l(1891),m=l(4109),g=l(7e3),x=l(6377),f=l(4589),b=l(192),v=l(423),y=l(3557),j=l(9030),N=l(4652),A=l(4927),w=l(7192),k=l(5383),E=l(882),C=l(822),T=l(6766);let S={TITLE:/^[a-zA-Z0-9áéíóúÁÉÍÓÚñÑüÜ\s.,!?¡¿()\-:'"]+$/,TAG:/^[a-zA-Z0-9áéíóúÁÉÍÓÚñÑüÜ\s\-]+$/,FILE_EXTENSIONS:["jpg","jpeg","png","gif","webp"],MAX_FILE_SIZE:5242880,MAX_TITLE_LENGTH:200,MAX_TAG_LENGTH:50,MAX_TAGS:10},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=e.trim();return t&&!t.test(l)&&(l=l.replace(/[^\w\s.,!?¡¿()\-:'"áéíóúÁÉÍÓÚñÑüÜ]/g,"")),l=C.A.sanitize(l,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]})},L=e=>C.A.sanitize(e,{ALLOWED_TAGS:["p","br","h1","h2","h3","h4","h5","h6","blockquote","ul","ol","li","strong","em","u","strike","code","pre","a","img","table","thead","tbody","tr","th","td","sup","sub","span"],ALLOWED_ATTR:["href","target","rel","src","alt","class","style","width","height","title","colspan","rowspan","data-align","align"],FORBID_TAGS:["script","iframe","form","input","button"],ADD_ATTR:["target"],ADD_TAGS:[],WHOLE_DOCUMENT:!1,SANITIZE_DOM:!0,ALLOW_ARIA_ATTR:!1,ALLOW_DATA_ATTR:!1,ALLOW_UNKNOWN_PROTOCOLS:!1,ALLOW_SELF_CLOSE_IN_ATTR:!1,USE_PROFILES:{html:!0,svg:!1,svgFilters:!1,mathMl:!1}});function I(){let e=(0,r.useRouter)(),{user:t,token:l,isAuthenticated:s,isLoading:C}=(0,o.A)(),I=(0,n.useRef)(!1),D=t?t.first_name||t.full_name||t.email.split("@")[0]:"",[O,R]=(0,n.useState)(""),[G,F]=(0,n.useState)(""),[M,B]=(0,n.useState)(null),[z,H]=(0,n.useState)(null),[X,P]=(0,n.useState)([]),[W,q]=(0,n.useState)([]),[U,Z]=(0,n.useState)([]),[J,K]=(0,n.useState)(""),[V,$]=(0,n.useState)(!1),[Q,Y]=(0,n.useState)(null),[ee,et]=(0,n.useState)(!1),[el,ea]=(0,n.useState)(!0),[en,er]=(0,n.useState)(""),[es,ei]=(0,n.useState)(!1),[eo,ec]=(0,n.useState)(""),[ed,eu]=(0,n.useState)(!1),[eh,ep]=(0,n.useState)(!1),[em,eg]=(0,n.useState)([]),[ex,ef]=(0,n.useState)(null),eb=(0,c.hG)({extensions:[d.A.configure({heading:!1}),E.A.configure({levels:[1,2,3,4,5,6]}),u.A.configure({placeholder:"Escribe tu art\xedculo aqu\xed..."}),h.Ay.configure({openOnClick:!1,autolink:!0}),p.Ay,m.A.configure({types:["heading","paragraph"],alignments:["left","center","right","justify"]}),g.A,x.A,f.A,b.Ay.configure({resizable:!0}),v.A,y.A,j.h,N.Ay,A.A,w.A,k.Ay],content:G,onUpdate:e=>{let{editor:t}=e;F(t.getHTML())},immediatelyRender:!1}),ev=(0,n.useCallback)(()=>{eo&&eb&&(eb.chain().focus().setImage({src:eo}).run(),ec(""),eu(!1))},[eo,eb]),ey=(0,n.useCallback)(()=>{en&&eb&&(eb.chain().focus().setLink({href:en}).run(),er(""),ei(!1))},[en,eb]);(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("http://localhost:8000/api/destinations/continents/");if(e.ok){let t=await e.json();eg(t)}else eg([{id:1,name:"Europa",slug:"europa"},{id:2,name:"Asia",slug:"asia"},{id:3,name:"Am\xe9rica",slug:"america"},{id:4,name:"\xc1frica",slug:"africa"},{id:5,name:"Ocean\xeda",slug:"oceania"},{id:6,name:"Ant\xe1rtida",slug:"antartida"}])}catch(e){console.error("Error al cargar continentes:",e),eg([{id:1,name:"Europa",slug:"europa"},{id:2,name:"Asia",slug:"asia"},{id:3,name:"Am\xe9rica",slug:"america"},{id:4,name:"\xc1frica",slug:"africa"},{id:5,name:"Ocean\xeda",slug:"oceania"},{id:6,name:"Ant\xe1rtida",slug:"antartida"}])}};(async()=>{try{let e=await fetch("http://localhost:8000/api/tags/");if(e.ok){let t=await e.json();q(t.results||[])}}catch(e){console.error("Error al cargar tags:",e)}})(),e()},[]),(0,n.useEffect)(()=>{I.current||(async()=>{if(ea(!0),!C){if(!s&&!C)return e.push("/login");if(l)try{let t=await fetch("http://localhost:8000/api/users/permissions/",{headers:{Authorization:"Bearer ".concat(l)}});if(t.ok){let l=await t.json();et(l.can_create_content||!1),l.can_create_content||(Y("No tienes permisos para crear contenido"),setTimeout(()=>{e.push("/articulos")},3e3))}I.current=!0}catch(e){console.error("Error verificando permisos:",e)}finally{ea(!1)}}})()},[t,l,e,s,C]);let ej=e=>{P(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eN=e=>{Z(t=>t.filter(t=>t!==e))},eA=e=>e.trim()?e.length>S.MAX_TITLE_LENGTH?{valid:!1,error:"El t\xedtulo no puede superar los ".concat(S.MAX_TITLE_LENGTH," caracteres")}:S.TITLE.test(e)?{valid:!0}:{valid:!1,error:"El t\xedtulo contiene caracteres no permitidos"}:{valid:!1,error:"El t\xedtulo es obligatorio"},ew=e=>e.trim()?e.length>S.MAX_TAG_LENGTH?{valid:!1,error:"La etiqueta no puede superar los ".concat(S.MAX_TAG_LENGTH," caracteres")}:S.TAG.test(e)?{valid:!0}:{valid:!1,error:"La etiqueta contiene caracteres no permitidos"}:{valid:!1},ek=e=>{var t;if(e.size>S.MAX_FILE_SIZE)return{valid:!1,error:"La imagen no puede superar los ".concat(S.MAX_FILE_SIZE/1048576,"MB")};let l=(null==(t=e.name.split(".").pop())?void 0:t.toLowerCase())||"";return S.FILE_EXTENSIONS.includes(l)?{valid:!0}:{valid:!1,error:"Formato de imagen no v\xe1lido. Formatos permitidos: ".concat(S.FILE_EXTENSIONS.join(", "))}},eE=e=>{let t=new Set;return e.forEach(e=>{let l=_(e,S.TAG);ew(l).valid&&l&&t.add(l)}),Array.from(t).slice(0,S.MAX_TAGS)},eC=()=>{if(!J.trim())return;let e=J.split(",").map(e=>e.trim()),t=[],l=!1;if(e.forEach(e=>{let a=_(e,S.TAG),n=ew(a);n.valid&&a?U.includes(a)||t.includes(a)||t.push(a):n.error&&(l=!0,Y("Etiqueta inv\xe1lida: ".concat(n.error)))}),t.length>0){if(U.length+t.length>S.MAX_TAGS)return void Y("No puedes a\xf1adir m\xe1s de ".concat(S.MAX_TAGS," etiquetas"));Z([...U,...t]),K(""),l||Y(null)}},eT=async t=>{t.preventDefault();let a=eA(O);if(!a.valid)return void Y(a.error||"T\xedtulo inv\xe1lido");if(!G||""===G.trim())return void Y("El contenido del art\xedculo no puede estar vac\xedo");if(eh&&!ex)return void Y("Si el art\xedculo es un destino, debes seleccionar un continente");try{$(!0),Y(null);let t=new FormData;t.append("title",_(O,S.TITLE)),t.append("content",L(G));let a=[...X];for(let e of(U.length>0&&eE(U).forEach(e=>{a.includes(e)||a.push(e)}),a.length>0&&(t.append("new_tags",JSON.stringify(a)),console.log("Tags a enviar:",JSON.stringify(a))),M&&t.append("image",M),t.append("is_destination",eh?"true":"false"),eh&&ex&&t.append("continent",ex.toString()),console.log("Datos del formulario a enviar:"),t.entries()))console.log("".concat(e[0],": ").concat(e[1]));let n=await fetch("http://localhost:8000/api/articles/create/",{method:"POST",headers:{Authorization:"Bearer ".concat(l)},body:t});if(!n.ok){let e=await n.json();throw console.error("Error respuesta:",n.status,e),Error(e.detail||"Error al crear el art\xedculo")}let r=await n.json();console.log("Art\xedculo creado:",r),e.push("/articulos/".concat(r.slug))}catch(e){console.error("Error:",e),Y(e instanceof Error?e.message:"Error al crear el art\xedculo")}finally{$(!1)}};return el?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})}):t&&ee?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)(i(),{href:"/articulos",className:"inline-flex items-center text-teal-600 hover:text-teal-800",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Volver a art\xedculos"]})}),(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 text-gray-800",children:"Crear nuevo art\xedculo"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-teal-500 flex items-center justify-center text-white font-bold mr-3",children:D.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-gray-800 font-medium",children:["Escribiendo como: ",D]}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Los art\xedculos publicados aparecer\xe1n con tu nombre"})]})]}),Q&&(0,a.jsx)("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg mb-6",children:Q}),(0,a.jsxs)("form",{onSubmit:eT,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo *"}),(0,a.jsx)("input",{type:"text",id:"title",value:O,onChange:e=>R(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-1",children:"Imagen destacada"}),(0,a.jsx)("input",{type:"file",id:"image",onChange:e=>{let t=e.target.files;if(t&&t.length>0){let l=t[0],a=ek(l);if(!a.valid){Y(a.error||"Error en la imagen"),e.target.value="";return}B(l);let n=new FileReader;n.onloadend=()=>{let e=n.result;"string"==typeof e&&H(e)},n.readAsDataURL(l),Y(null)}},accept:"image/*",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"}),z&&(0,a.jsxs)("div",{className:"mt-2 relative h-48 w-full",children:[(0,a.jsx)(T.default,{src:z,alt:"Vista previa",className:"h-full w-full object-cover rounded-lg",fill:!0,sizes:"(max-width: 768px) 100vw, 400px",style:{objectFit:"cover"}}),(0,a.jsx)("button",{type:"button",onClick:()=>{B(null),H(null)},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"is_destination",checked:eh,onChange:e=>ep(e.target.checked),className:"h-4 w-4 text-teal-600 focus:ring-teal-500 mr-2"}),(0,a.jsx)("label",{htmlFor:"is_destination",className:"text-sm font-medium text-gray-700",children:"Este art\xedculo es un destino tur\xedstico"})]}),eh&&(0,a.jsxs)("div",{className:"mt-4 mb-6 ml-6 border-l-2 border-teal-200 pl-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 mb-2",children:"Selecciona el continente al que pertenece este destino:"}),(0,a.jsxs)("select",{value:ex||"",onChange:e=>ef(e.target.value?parseInt(e.target.value):null),className:"border rounded-md py-2 px-3 w-full focus:outline-none focus:ring-2 focus:ring-teal-500",children:[(0,a.jsx)("option",{value:"",children:"-- Selecciona un continente --"}),em.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"El continente ayuda a categorizar y mostrar correctamente este destino en la secci\xf3n de destinos."})]})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Categor\xedas"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 mb-4",children:W.map(e=>(0,a.jsx)("div",{onClick:()=>ej(e.slug),className:"p-3 rounded-lg cursor-pointer transition-colors border\n                      ".concat(X.includes(e.slug)?"bg-teal-100 border-teal-500 text-teal-900":"bg-white border-gray-200 hover:bg-gray-100 text-gray-700","\n                    "),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:X.includes(e.slug),onChange:()=>{},className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2",children:e.name})]})},e.id))}),(0,a.jsxs)("div",{className:"flex mt-2",children:[(0,a.jsx)("input",{type:"text",value:J,onChange:e=>K(_(e.target.value,S.TAG)),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eC())},placeholder:"A\xf1adir nueva categor\xeda...",className:"border rounded-l-md py-2 px-3 w-full focus:outline-none focus:ring-2 focus:ring-teal-500",maxLength:S.MAX_TAG_LENGTH}),(0,a.jsx)("button",{type:"button",onClick:eC,disabled:""===J.trim(),className:"bg-teal-600 text-white px-4 rounded-r-md hover:bg-teal-700 transition-colors disabled:opacity-50",children:"A\xf1adir"})]}),U.length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Categor\xedas personalizadas:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:U.map((e,t)=>(0,a.jsxs)("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm flex items-center",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>eN(e),className:"ml-1 text-gray-500 hover:text-gray-700",children:"\xd7"})]},t))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenido *"}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Usa las herramientas de formato para crear un art\xedculo m\xe1s atractivo: encabezados, negritas, listas, enlaces, im\xe1genes y m\xe1s."})}),(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden mb-12",children:[(0,a.jsxs)("div",{className:"bg-gray-100 border-b px-4 py-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,a.jsxs)("select",{onChange:e=>{let t=e.target.value;if("p"===t)null==eb||eb.chain().focus().setParagraph().run();else if(t.startsWith("h")){let e=parseInt(t.charAt(1));null==eb||eb.chain().focus().setHeading({level:e}).run()}e.target.value=""},className:"p-1 rounded border",value:"",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Formato"}),(0,a.jsx)("option",{value:"p",children:"P\xe1rrafo"}),(0,a.jsx)("option",{value:"h1",children:"H1"}),(0,a.jsx)("option",{value:"h2",children:"H2"}),(0,a.jsx)("option",{value:"h3",children:"H3"})]}),(0,a.jsxs)("div",{className:"flex border rounded overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().toggleBold().run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("bold"))?"bg-gray-200":""),title:"Negrita",children:(0,a.jsx)("span",{className:"font-bold",children:"B"})}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().toggleItalic().run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("italic"))?"bg-gray-200":""),title:"Cursiva",children:(0,a.jsx)("span",{className:"italic",children:"I"})}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().toggleUnderline().run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("underline"))?"bg-gray-200":""),title:"Subrayado",children:(0,a.jsx)("span",{className:"underline",children:"U"})})]}),(0,a.jsxs)("div",{className:"flex border rounded overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().toggleBulletList().run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("bulletList"))?"bg-gray-200":""),title:"Lista de vi\xf1etas",children:"•"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().toggleOrderedList().run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("orderedList"))?"bg-gray-200":""),title:"Lista numerada",children:"1."})]}),(0,a.jsxs)("div",{className:"flex border rounded overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().setTextAlign("left").run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive({textAlign:"left"}))?"bg-gray-200":""),title:"Alinear a la izquierda",children:"←"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().setTextAlign("center").run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive({textAlign:"center"}))?"bg-gray-200":""),title:"Centrar",children:"↔"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().setTextAlign("right").run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive({textAlign:"right"}))?"bg-gray-200":""),title:"Alinear a la derecha",children:"→"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().setTextAlign("justify").run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive({textAlign:"justify"}))?"bg-gray-200":""),title:"Justificar",children:"⇔"})]}),(0,a.jsxs)("div",{className:"flex border rounded overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().toggleHighlight().run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("highlight"))?"bg-gray-200":""),title:"Resaltar texto",children:(0,a.jsx)("span",{className:"bg-yellow-200 px-1",children:"T"})}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().toggleCodeBlock().run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("codeBlock"))?"bg-gray-200":""),title:"Bloque de c\xf3digo",children:"</>"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().toggleSubscript().run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("subscript"))?"bg-gray-200":""),title:"Sub\xedndice",children:"₂"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().toggleSuperscript().run(),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("superscript"))?"bg-gray-200":""),title:"Super\xedndice",children:"\xb2"})]}),(0,a.jsxs)("div",{className:"flex border rounded overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>ei(!es),className:"p-1 px-2 ".concat((null==eb?void 0:eb.isActive("link"))?"bg-gray-200":""),title:"Insertar enlace",children:"\uD83D\uDD17"}),(0,a.jsx)("button",{type:"button",onClick:()=>{let e=(null==eb?void 0:eb.isActive("link"))?eb.getAttributes("link").href:null;e&&window.open(e,"_blank")},className:"p-1 px-2 disabled:opacity-50",title:"Abrir enlace",disabled:!(null==eb?void 0:eb.isActive("link")),children:"\uD83C\uDF10"}),(0,a.jsx)("button",{type:"button",onClick:()=>{(null==eb?void 0:eb.isActive("link"))&&eb.chain().focus().unsetLink().run()},disabled:!(null==eb?void 0:eb.isActive("link")),className:"p-1 px-2 disabled:opacity-50",title:"Eliminar enlace",children:"\uD83D\uDDD1️"}),(0,a.jsx)("button",{type:"button",onClick:()=>eu(!ed),className:"p-1 px-2",title:"Insertar imagen",children:"\uD83D\uDDBC️"})]}),(0,a.jsxs)("div",{className:"flex border rounded overflow-hidden",children:[(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),className:"p-1 px-2",title:"Insertar tabla",children:(0,a.jsx)("span",{className:"flex items-center justify-center",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,a.jsx)("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),(0,a.jsx)("line",{x1:"3",y1:"15",x2:"21",y2:"15"}),(0,a.jsx)("line",{x1:"9",y1:"3",x2:"9",y2:"21"}),(0,a.jsx)("line",{x1:"15",y1:"3",x2:"15",y2:"21"})]})})}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().addColumnBefore().run(),disabled:!(null==eb?void 0:eb.can().addColumnBefore()),className:"p-1 px-2 disabled:opacity-50",title:"A\xf1adir columna antes",children:"+←"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().addColumnAfter().run(),disabled:!(null==eb?void 0:eb.can().addColumnAfter()),className:"p-1 px-2 disabled:opacity-50",title:"A\xf1adir columna despu\xe9s",children:"+→"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().deleteColumn().run(),disabled:!(null==eb?void 0:eb.can().deleteColumn()),className:"p-1 px-2 disabled:opacity-50",title:"Eliminar columna",children:"-Col"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().addRowBefore().run(),disabled:!(null==eb?void 0:eb.can().addRowBefore()),className:"p-1 px-2 disabled:opacity-50",title:"A\xf1adir fila antes",children:"+↑"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().addRowAfter().run(),disabled:!(null==eb?void 0:eb.can().addRowAfter()),className:"p-1 px-2 disabled:opacity-50",title:"A\xf1adir fila despu\xe9s",children:"+↓"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().deleteRow().run(),disabled:!(null==eb?void 0:eb.can().deleteRow()),className:"p-1 px-2 disabled:opacity-50",title:"Eliminar fila",children:"-Fila"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==eb?void 0:eb.chain().focus().deleteTable().run(),disabled:!(null==eb?void 0:eb.can().deleteTable()),className:"p-1 px-2 disabled:opacity-50",title:"Eliminar tabla",children:"✖"})]})]}),es&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded flex gap-2",children:[(0,a.jsx)("input",{type:"url",value:en,onChange:e=>er(e.target.value),placeholder:"https://ejemplo.com",className:"flex-1 px-2 py-1 border rounded",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),ey())}}),(0,a.jsx)("button",{type:"button",onClick:ey,className:"px-3 py-1 bg-teal-600 text-white rounded",children:"A\xf1adir enlace"})]}),ed&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"url",value:eo,onChange:e=>ec(e.target.value),placeholder:"https://ejemplo.com/imagen.jpg",className:"flex-1 px-2 py-1 border rounded",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),ev())}}),(0,a.jsx)("button",{type:"button",onClick:ev,className:"px-3 py-1 bg-teal-600 text-white rounded whitespace-nowrap",children:"A\xf1adir imagen"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Puedes pegar la URL de una imagen o usar un servicio de alojamiento de im\xe1genes como ",(0,a.jsx)("a",{href:"https://imgur.com/",target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:underline",children:"Imgur"})," o ",(0,a.jsx)("a",{href:"https://postimages.org/",target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:underline",children:"Postimages"}),"."]})]})]}),(0,a.jsx)(c.$Z,{editor:eb,className:"prose max-w-none min-h-[500px] p-4"})]})]})]}),(0,a.jsxs)("div",{className:"pt-5 border-t border-gray-200",children:[Q&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md",children:Q}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)(i(),{href:"/articulos",className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 mr-3",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:opacity-50",disabled:V,children:V?"Publicando...":"Publicar art\xedculo"})]})]})]})]})}):(0,a.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:(0,a.jsxs)("div",{className:"bg-red-50 p-6 rounded-lg text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-medium text-red-800 mb-4",children:"Acceso restringido"}),(0,a.jsx)("p",{className:"text-gray-700 mb-6",children:Q||"No tienes permiso para acceder a esta secci\xf3n. Se requiere rol de creador de contenido."}),(0,a.jsx)(i(),{href:"/articulos",className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:"Volver a art\xedculos"})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4,277,874,766,101,441,684,358],()=>t(5775)),_N_E=e.O()}]);