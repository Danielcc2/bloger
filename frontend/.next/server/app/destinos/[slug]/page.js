(()=>{var e={};e.id=206,e.ids=[206],e.modules={142:(e,t,s)=>{Promise.resolve().then(s.bind(s,3547))},770:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=s(5239),a=s(8088),l=s(8170),i=s.n(l),o=s(893),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let d={children:["",{children:["destinos",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2477)),"/var/www/bloger/frontend/app/destinos/[slug]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,2007)),"/var/www/bloger/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/var/www/bloger/frontend/app/destinos/[slug]/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/destinos/[slug]/page",pathname:"/destinos/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2477:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/bloger/frontend/app/destinos/[slug]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/bloger/frontend/app/destinos/[slug]/page.tsx","default")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3547:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(687),a=s(3210),l=s(474),i=s(5814),o=s.n(i),n=s(6189),d=s(1295);function c(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),{user:s,token:i}=(0,d.A)();Array.isArray(e?.slug)?e.slug[0]:e?.slug;let[c,m]=(0,a.useState)(null),[x,u]=(0,a.useState)(!0),[h,p]=(0,a.useState)(null),[g,v]=(0,a.useState)(null),[f,w]=(0,a.useState)(!1),[b,j]=(0,a.useState)([]),N=async()=>{if(!s){p("Debes iniciar sesi\xf3n para eliminar un destino"),t.push("/login");return}try{let e=await fetch(`${g}/api/users/permissions/`,{headers:{Authorization:`Bearer ${i}`}});if(e.ok){let t=await e.json();if(console.log("Datos de permisos:",t),!t.is_admin)return void p("No tienes permisos para eliminar destinos")}else{console.error("Error al verificar permisos:",e.status),p("Error al verificar tus permisos");return}}catch(e){console.error("Error al comprobar permisos:",e),p("Error al verificar tus permisos de administrador");return}if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este destino? Esta acci\xf3n no se puede deshacer."))try{let e=localStorage.getItem("token");if(!e)return void t.push("/login");let s=`${g}/api/destinations/${c?.slug}/delete/`;console.log("Intentando eliminar destino con URL:",s),console.log("Token encontrado:",e?"S\xed":"No"),console.log("Destino a eliminar:",c);let r=await fetch(s,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(console.log("Respuesta del servidor:",r.status,r.statusText),r.ok)console.log("Destino eliminado correctamente"),t.push("/destinos");else{let e="No se pudo eliminar el destino";try{let t=await r.text();if(console.error("Respuesta de error completa:",t),t)try{let s=JSON.parse(t);e=s.detail||s.message||e}catch(s){console.error("Error parsing error response:",s),t.length<100&&(e=t)}}catch(e){console.error("Error al leer la respuesta:",e)}throw 403===r.status?e="No tienes permisos para eliminar este destino":404===r.status&&(e="El destino no existe o ya ha sido eliminado"),Error(e)}}catch(e){console.error("Error al eliminar:",e),e instanceof Error?p(`Error al eliminar el destino: ${e.message}`):p("Error desconocido al eliminar el destino")}};if(x)return(0,r.jsxs)("div",{className:"flex justify-center items-center min-h-screen",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"}),(0,r.jsx)("p",{className:"ml-3 text-gray-600",children:"Cargando destino..."})]});if(h||!c)return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto bg-red-50 p-6 rounded-lg",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-red-700 mb-4",children:"Error"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:h||"No se encontr\xf3 el destino solicitado"}),(0,r.jsx)(o(),{href:"/destinos",className:"inline-block px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:"Volver a destinos"})]})});let y=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),E=(e,t=100)=>{let s=e.replace(/<[^>]*>/g,"");return s.length>t?s.substring(0,t)+"...":s};return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[h&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:(0,r.jsxs)("p",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),h]})}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(o(),{href:"/destinos",className:"inline-flex items-center text-teal-600 hover:text-teal-800",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Volver a destinos"]}),f&&(0,r.jsx)("span",{className:"ml-4 bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded",children:"Modo Administrador"})]}),(0,r.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-4 text-gray-800",children:c.name}),f&&(0,r.jsxs)("button",{onClick:N,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-bold text-md shadow-md flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Eliminar"]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center text-gray-600 mb-6 gap-4",children:[(0,r.jsx)("span",{className:"bg-teal-50 text-teal-700 px-3 py-1 rounded-full text-sm",children:c.country}),(0,r.jsx)("span",{className:"text-sm",children:c.city})]}),(0,r.jsx)("div",{className:"mb-8 rounded-lg overflow-hidden h-96 relative",children:(0,r.jsx)(l.default,{src:c.image?c.image.startsWith("http")?c.image:`${g}${c.image}`:"/images/destinos/placeholder.jpg",alt:c.name,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 100vw, 800px",style:{objectFit:"cover"},className:"transition-transform hover:scale-105 duration-500",priority:!0})}),(0,r.jsx)("div",{className:"prose lg:prose-xl max-w-none mb-12",dangerouslySetInnerHTML:{__html:c.description}}),b.length>0&&(0,r.jsxs)("div",{className:"my-16",children:[(0,r.jsxs)("h2",{className:"text-3xl font-bold mb-8 text-gray-800 flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mr-3 text-teal-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})}),"Art\xedculos sobre ",c.name]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:b.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 flex flex-col transform hover:-translate-y-1",children:[(0,r.jsxs)("div",{className:"relative h-48",children:[e.image?(0,r.jsx)(l.default,{src:e.image.startsWith("http")?e.image:e.image.startsWith("/media/")?`${g}${e.image}`:`${g}/media/${e.image}`,alt:e.title,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover",onError:()=>{let t=document.querySelector(`img[alt='${e.title}']`);t&&(t.src="/images/destinos/default.jpg")}}):(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-teal-500 to-blue-500 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-4xl text-white font-bold",children:e.title.charAt(0)})}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent text-white p-4",children:(0,r.jsx)("p",{className:"text-sm font-medium",children:y(e.created_at)})})]}),(0,r.jsxs)("div",{className:"p-5 flex-grow flex flex-col",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-2 line-clamp-2 text-gray-800",children:(0,r.jsx)(o(),{href:`/articulos/${e.slug}`,className:"hover:text-teal-600 transition-colors",children:e.title})}),(0,r.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-3 flex-grow",children:E(e.content,120)}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-auto pt-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-800 font-bold mr-2",children:e.author.first_name?.charAt(0)||e.author.email?.charAt(0)}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e.author.first_name||e.author.email.split("@")[0]})]}),(0,r.jsxs)(o(),{href:`/articulos/${e.slug}`,className:"inline-flex items-center text-teal-600 hover:text-teal-800 font-medium text-sm",children:["Leer art\xedculo",(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})]})]},e.id))})]}),(0,r.jsx)("div",{className:"mt-12 border-t pt-8",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 justify-between",children:[(0,r.jsxs)(o(),{href:"/destinos",className:"inline-flex items-center text-teal-600 hover:text-teal-800",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Ver todos los destinos"]}),(0,r.jsxs)("a",{href:"#",className:"inline-flex items-center text-teal-600 hover:text-teal-800",onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:[(0,r.jsx)("span",{className:"mr-1",children:"Volver arriba"}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})]})]})})]})})}},3873:e=>{"use strict";e.exports=require("path")},6055:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(1658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},6934:(e,t,s)=>{Promise.resolve().then(s.bind(s,2477))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,110,658,474,581],()=>s(770));module.exports=r})();